<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Triiiceratops Consumer Demo</title>
        <link rel="stylesheet" href="app.css" />

        <!-- Load the viewer (self-contained IIFE bundle with all dependencies) -->
        <script src="../dist/triiiceratops-element.iife.js"></script>

        <!-- Load plugins (uses Svelte runtime from the viewer bundle) -->
        <script src="../dist/triiiceratops-plugin-image-manipulation.iife.js"></script>
    </head>
    <body>
        <!-- The Viewer Component -->
        <triiiceratops-viewer
            theme="dark"
            manifest-id="https://iiif.wellcomecollection.org/presentation/v3/b18035723"
            canvas-id="https://iiif.wellcomecollection.org/presentation/b18035723/canvases/b18035723_0001.JP2"
        ></triiiceratops-viewer>

        <script>
            // Wait for the custom element to be defined, then assign plugins
            customElements.whenDefined('triiiceratops-viewer').then(() => {
                const viewer = document.querySelector('triiiceratops-viewer');

                if (viewer) {
                    // Plugins are exposed on window.TriiiceratopsPlugins by the IIFE bundles
                    viewer.plugins = [
                        window.TriiiceratopsPlugins.ImageManipulation,
                    ];
                    console.log('Plugins assigned to viewer:', viewer.plugins);
                }
            });
        </script>
    </body>
</html>
